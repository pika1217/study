---
title: HTTP2.0和HTTP1.0的差别
date: 2017-7-20
tags: http
categories: 网络
---
相比 HTTP/1.x，HTTP/2 在底层传输做了很大的改动和优化：

1. HTTP/2 采用二进制格式传输数据，而非 HTTP/1.x 的文本格式。二进制格式在协议的解析和优化扩展上带来更多的优势和可能。//Frame

2. HTTP/1.x 每次请求，都会携带大量冗余头信息，浪费了很多带宽资源。HTTP/2对消息头采用 HPACK 进行压缩传输，能够节省消息头占用的网络的流量。//HPACK

3. 多路复用：直白的说就是所有的请求都是通过一个 TCP 连接并发完成。HTTP/1.x 虽然通过 pipeline 也能并发请求，但是多个请求之间的响应会被阻塞的，所以 pipeline 至今也没有被普及应用，而 HTTP/2 做到了真正的并发请求。同时，流还支持优先级和流量控制。 //Stream ID

4. Server Push：服务端能够更快的把资源推送给客户端。例如服务端可以主动把 JS 和 CSS 文件推送给客户端，而不需要客户端解析HTML再发送这些请求。当客户端需要的时候，它已经在客户端了。//服务端给客户端发送一个 Frame Type 为 PUSH_PROMISE 的 Frame

5. 并行双向字节流的请求和响应：在HTTP2.0上，实现并行双向字节流的请求和响应，客户端和服务器可以把HTTP 消息分解为互不依赖的帧，然后乱序发送，最后再在另一端把它们重新组合起来。消除不必要的延迟，减少页面加载时间。注意，同一链接上有多个不同方向的数据流在传输。客户端可以一边乱序发送stream，也可以一边接收服务器的响应，而服务器那端同理。 

6. HTTP2.0 的请求优先级：每个HTTP2.0流里面有个优先值，这个优先值确定着客户端和服务器处理不同的流采取不同的优先级策略，高优先级的流都应该优先发送，但又不会绝对的。绝对地准守，可能又会引入首队阻塞的问题：高优先级的请求慢导致阻塞其他资源交付。分配处理资源和客户端与服务器间的带宽，不同优先级的混合也是必须的。 
